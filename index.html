<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Nanotwitter by teamab2015</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/teamab2015/NanoTwitter">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/teamab2015/NanoTwitter/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/teamab2015/NanoTwitter/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Nanotwitter</h1>
          <p></p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/teamab2015">teamab2015</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="nanotwitter-teamab" class="anchor" href="#nanotwitter-teamab" aria-hidden="true"><span class="octicon octicon-link"></span></a>NanoTwitter TEAMAB</h1>

<p>Team member: Jiancheng Zhu, Alex Suk, Ben Winschel, Ethan Stein<br>
Dec 8, 2015</p>

<p><a href="https://codeship.com/projects/120618"> <img src="https://codeship.com/projects/c4bba410-7f91-0133-3c3e-62195a4c75a1/status?branch=master" alt="Codeship Status for teamab2015/NanoTwitter"></a></p>

<p><a href="https://codeclimate.com/github/cheng9393/NanoTwitter"><img src="https://codeclimate.com/github/cheng9393/NanoTwitter/badges/gpa.svg" alt="Code Climate"></a></p>

<p><a href="http://teamab2015.github.io/NanoTwitter" title="Profile">Profile http://teamab2015.github.io/NanoTwitter</a>  </p>

<p><a href="https://github.com/teamab2015/NanoTwitter">Github https://github.com/teamab2015/NanoTwitter</a></p>

<p><a href="https://teamab.herokuapp.com" title="Demo">Demo https://teamab.herokuapp.com</a>  </p>

<p>This a sinatra application that imitates Twitter. It has following functions:  </p>

<ul>
<li>view timeline</li>
<li>follow/unfollow</li>
<li>notification</li>
<li>tweet with <em>@ mention</em> and <em># tag</em>
</li>
<li>tag view</li>
<li>reply view<br>
</li>
</ul>

<p><img src="http://teamab2015.github.io/NanoTwitter/images/Screen%20Shot%202015-12-07%20at%203.30.28%20AM.png" alt="ScreenShot">
<img src="http://teamab2015.github.io/NanoTwitter/images/test.png" alt="Screenshot">
When the user is logged in and looking at someone else's page, they can follow/unfollow that user!
<img src= "http://teamab2015.github.io/NanoTwitter/images/Screen%20Shot%202015-12-08%20at%207.55.56%20AM.png" alt="Screenshot">
<img src= "http://teamab2015.github.io/NanoTwitter/images/Screen%20Shot%202015-12-08%20at%207.57.24%20AM.png" alt="Screenshot">

Being offline but looking at another user's profile will allow you to see their tweets and the tweets of people that they are following!
<img src= "http://teamab2015.github.io/NanoTwitter/images/Screen%20Shot%202015-12-08%20at%207.59.12%20AM.png" alt="Screenshot">

</p>

<h2>
<a id="technology-description" class="anchor" href="#technology-description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Technology Description</h2>

<p>Redis &amp; resque-pool</p>

<p>NanoTwitter cached all the relationship ("followers-#{followee_id}" stores a set of follower_ids), all users ("user-#{user.id}" stores a JSON string of user info), timeline ("homeTimeline" stores the global timeline, "userTimeline-#{user_id}" stores the timeline of a user). The relationship and user cache is loaded at the start of NanoTwitter and updated while any action among follow, unfollow, register happens.The timeline is a first fetched from database and then loaded into redis. When a person tweet, unprocessed tweet string will be added to related timeline list. Since the all timeline cache has an expire timeout of one of two minutes, processed tweet string will show up after that expire timeout. NanoTwitter also use queue to process tweet, because tweet is very costly, as it involves write tag, mention to database, add tag and mention link to original tweet and then write it to database.</p>

<h2>
<a id="result-of-loaderio-test" class="anchor" href="#result-of-loaderio-test" aria-hidden="true"><span class="octicon octicon-link"></span></a>Result of loader.io test</h2>

<table>
<thead>
<tr>
<th>Object &amp; Condition</th>
<th>Average</th>
<th>Min</th>
<th>Max</th>
<th>Success</th>
<th>Timeout</th>
</tr>
</thead>
<tbody>
<tr>
<td>testuser tweet u = 100, t = 500, f = 30</td>
<td>1437</td>
<td>24</td>
<td>4333</td>
<td>5054</td>
<td>0</td>
</tr>
<tr>
<td>testuser home u = 100, t = 500, f = 30</td>
<td>2940</td>
<td>38</td>
<td>9110</td>
<td>2326</td>
<td>0</td>
</tr>
<tr>
<td>home u = 100, t = 500, f = 30</td>
<td>1537</td>
<td>18</td>
<td>4105</td>
<td>4685</td>
<td>0</td>
</tr>
<tr>
<td>testuser tweet u = 500, t = 500, f = 100</td>
<td>1215</td>
<td>19</td>
<td>3410</td>
<td>5996</td>
<td>0</td>
</tr>
<tr>
<td>testuser home u = 500, t = 500, f = 100</td>
<td>1522</td>
<td>42</td>
<td>4623</td>
<td>4729</td>
<td>0</td>
</tr>
<tr>
<td>home u = 500, t = 500, f = 100</td>
<td>1053</td>
<td>18</td>
<td>3266</td>
<td>6815</td>
<td>0</td>
</tr>
<tr>
<td>testuser tweet u = 3000, t = 2000, f = 1000</td>
<td>4571</td>
<td>81</td>
<td>10004</td>
<td>1346</td>
<td>52</td>
</tr>
<tr>
<td>testuser home u = 3000, t = 2000, f = 1000</td>
<td>1584</td>
<td>27</td>
<td>4032</td>
<td>4585</td>
<td>0</td>
</tr>
<tr>
<td>home u = 3000, t = 2000, f = 1000</td>
<td>1226</td>
<td>15</td>
<td>4039</td>
<td>5941</td>
<td>0</td>
</tr>
</tbody>
</table>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>require ruby 2.+<br>
Run rake db:reset to clear the database and reseed.<br>
The development database comes with a user(email=<a href="mailto:test@test.com">test@test.com</a>, password=test).  </p>

<h2>
<a id="routes-not-updated" class="anchor" href="#routes-not-updated" aria-hidden="true"><span class="octicon octicon-link"></span></a>Routes (not updated)</h2>

<p><code>/</code><br>
If not logged in, then display top 50 tweets of all users, else redirect to <code>/user/:logged_in_user_id</code></p>

<p><code>/user/:id</code><br>
The home page of user, displaying Top 50 tweets of followed users and himself</p>

<p><code>/login/:id</code><br>
log in the user with user_id, may accept requests with password parameter to log in</p>

<p><code>/logout</code><br>
log out the current user, after logging out redirect to <code>/</code></p>

<p><code>/user/register</code><br>
display register page</p>

<p><code>/login</code><br>
display the login page, after logging in redirect to <code>/user/:id</code></p>

<p><code>/test/reset</code><br>
delete all rows containing test user in relations table, delete all tweets send by test users, delete all test users</p>

<p><code>/test/seed/:n</code><br>
create n fake users</p>

<p><code>/test/tweets/:n</code><br>
user “testuser” generates n new fake tweets</p>

<p><code>/test/follow/:n</code><br>
randomly select n users to follow user “testuser”</p>

<p><code>/test/users</code><br>
diaplay all the fake users</p>

<h2>
<a id="api-proposed" class="anchor" href="#api-proposed" aria-hidden="true"><span class="octicon octicon-link"></span></a>API (proposed)</h2>

<p><strong>GET <code>v1/users/:id</code></strong><br>
Get the user of given id<br>
result:</p>

<pre><code>{
    name: text,
    email: text,
    id: integer,
    avatar: text
}
</code></pre>

<p><strong>POST <code>v1/users</code></strong><br>
Create a user<br>
parameters:</p>

<pre><code>name: text, email: text, id: integer, avatar: text
</code></pre>

<p><strong>GET <code>v1/tweets/:id</code></strong>
Get the tweet of given id<br>
result:</p>

<pre><code>{
    id: integer,
    content: text,
    created: datetime,
    sender_id: integer,
    (optional)user: {
        name: text,
        email: text,
        id: integer,
        avatar: text
        }
}
</code></pre>

<p><strong>POST <code>v1/users/:id/tweets</code></strong><br>
<em>authentication: true</em><br>
Create a tweet for a user<br>
parameters:</p>

<pre><code>id: integer, content: text
</code></pre>

<p><strong>GET <code>v1/tweets/?sort=[+-{field_name}]&amp;page={#}&amp;per_page={#}&amp;embeded=[{field_name}]</code></strong><br>
Search for tweets
result:</p>

<pre><code>[{
    id: integer,
    content: text,
    created: datetime,
    sender_id: integer,
    (optional)user: {
        name: text,
        email: text,
        id: integer,
        avatar: text
        }
}]
</code></pre>

<p><strong>GET <code>v1/users/:id/tweets?sort=[+-{field_name}]&amp;page={#}&amp;per_page={#}&amp;embeded=[{field_name}]</code></strong><br>
Search the tweets send by a user<br>
result:</p>

<pre><code>[{
    id: integer,
    content: text,
    created: datetime,
    sender_id: integer,
}]
</code></pre>

<p><strong>GET <code>v1/users/:id/followees?embeded=[{field_name}]</code></strong><br>
Get the followees of a user<br>
result:</p>

<pre><code>[{followee_id:integer}]
</code></pre>

<p>or</p>

<pre><code>[{name: text,
    email: text,
    id: integer,
    avatar: text
}]
</code></pre>

<p><strong>GET <code>v1/users/:id/followers?embeded=[{field_name}]</code></strong><br>
Get the followees of a user<br>
result:</p>

<pre><code>[{follower_id:integer}]
</code></pre>

<p>or</p>

<pre><code>[{
    name: text,
    email: text,
    id: integer,
    avatar: text
}]
</code></pre>

<p><strong>POST <code>/users/:id/follow?followee={followee_id}</code></strong><br>
<em>authentication: true</em><br>
Create relation that the user(with id) follows another(with followee_id)  </p>

<p><strong>POST <code>/users/:id/unfollow?followee={followee_id}</code></strong><br>
<em>authentication: true</em><br>
Delete relation that the user(with id) follows another(with followee_id)</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
